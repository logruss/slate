<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Chat API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>First Online Solutions</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<h2 id="environments">Environments</h2>

<ul>
<li><code class="prettyprint">LIVE</code> - api.fantasticservices.com</li>
<li><code class="prettyprint">STAGE</code> - middlepoint-stg.1dxr.com</li>
<li><code class="prettyprint">DEV</code> - middlepoint-dev.1dxr.com</li>
</ul>

<p>In this document <code class="prettyprint">{{BASE_URL}}</code> is used as a placeholder for current environment.</p>

<h2 id="namespaces">Namespaces</h2>

<p>Namespace is added after version.</p>

<ul>
<li>GLOBAL FOR SYSTEM - <strong>/system</strong></li>
</ul>

<p>Example:</p>

<p>http://<code class="prettyprint">{{BASE_URL}}</code>/v2/<strong>system</strong></p>

<p>In this document namespace is included in examples.</p>

<h2 id="applications-identifying-tokens">Applications identifying tokens</h2>

<p>To access API all request must include identifying token header field.</p>

<blockquote>
<p>X-Application: <code class="prettyprint">{{APPLICATION_TOKEN}}</code></p>
</blockquote>

<aside class="notice">You must replace {{APPLICATION_TOKEN}} with your personal APP token.</aside>

<h1 id="communication-protocol">Communication Protocol</h1>

<h2 id="requests">Requests</h2>

<p>All requests to the API have <code class="prettyprint">path</code> component. 
It’s used to access resources and actions. </p>

<aside class="notice">All requests must be of type application/json</aside>
 

<p>Accepted request <code class="prettyprint">methods</code> are:</p>

<ul>
<li><code class="prettyprint">POST</code></li>
</ul>

<p>Example requests URL: http://<code class="prettyprint">{{BASE_URL}}</code>/v2/<a href="#namespaces">system</a>/chat</p>

<h2 id="response">Response</h2>

<blockquote>
<p>Response structure</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">1020</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Message received"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"debug_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"message text missing."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"debug_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">213124</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"db_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"latest_build"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>All responses are with HTTP status 200 and contain <code class="prettyprint">data</code> and <code class="prettyprint">meta</code> parameters. 
Optionally there can be success, error and warning parameters.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array</td>
<td>Array of data objects returned in the result of the request</td>
</tr>
<tr>
<td>success, warning, error</td>
<td>array</td>
<td>Messages with information for the request. More than one type of message can be returned in a response. success and error can’t come in the same response. warning can be combined with success or error.</td>
</tr>
<tr>
<td>meta</td>
<td>object</td>
<td>Parameter containing information for the system.</td>
</tr>
</tbody></table>

<h2 id="events">Events</h2>

<p>There are <code class="prettyprint">event_type</code> to identify the chat requests:</p>

<ul>
<li><code class="prettyprint">start_chat</code> - indicates that a new chat session is starting </li>
</ul>

<h1 id="chat">Chat</h1>

<h2 id="start-chat">Start chat</h2>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"start_chat"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Smith"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+4400000000000"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"operator_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
  <span class="o">{{</span>BASE_URL<span class="o">}}</span>/v2/system/chat <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'postman-token: 05f4290c-7075-3edc-190a-71b96c1c266e'</span> <span class="se">\</span>
  -d <span class="s1">'{
  "events": [
    {
      "chat_id": "hash",
      "event_type": "start_chat",
      "data": {
        "name": "John Smith",
        "email": "john.smith@example.com",
        "phone": "+4400000000000"
      }
    }
  ]
}'</span>
</code></pre>
<blockquote>
<p>Structure that will be send to the chat server:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"template"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"template_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"elements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fantastic Services"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The One-Stop Shop for All Home Services"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://files.dxr.cloud/ShmtDmH6fi6HbIcxsAOUkj9L2Jc41cropp8WdVLWtOfgj0iNvZkfESwzgsOl"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Book now"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">CategoriesListPostback</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Help"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HelpPostback"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_url"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"View website"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.fantasticservices.com/"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">1020</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chat session started"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"db_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"latest_build"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><b>Request parameters</b></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#event-types">event_type</a></td>
<td>string</td>
<td>Type of the event (<strong>required</strong>)</td>
</tr>
<tr>
<td>chat_id</td>
<td>string</td>
<td>Id of the initialized chat (<strong>required</strong>)</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Client name if available (<strong>optional</strong>)</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Client email if available (<strong>optional</strong>)</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>Client phone if available (<strong>optional</strong>)</td>
</tr>
</tbody></table>

<p><b>Response parameters</b></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#event-types">event_type</a></td>
<td>string</td>
<td>Type of the event</td>
</tr>
<tr>
<td><a href="#template-types">template_type</a></td>
<td>string</td>
<td>Type of the template to use</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>It can be either auto or manual</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Display in bold bellow the image_url</td>
</tr>
<tr>
<td>subtitle</td>
<td>string</td>
<td>Display bellow the title</td>
</tr>
<tr>
<td>image_url</td>
<td>string</td>
<td>Display on top if available</td>
</tr>
<tr>
<td><a href="#button-types">buttons</a></td>
<td>array</td>
<td>Array of button objects</td>
</tr>
</tbody></table>

<p><strong>Response visualization</strong></p>

<p><a href="http://files.dxr.cloud/bOW1wle4gbUEmlBQuWyIV8J9CT2PtNXJFF7PycI74TepOKGbJi9n5Ils2WuS"><img src="http://files.dxr.cloud/bOW1wle4gbUEmlBQuWyIV8J9CT2PtNXJFF7PycI74TepOKGbJi9n5Ils2WuS" alt="N|GetStartedVisual" /></a></p>

<h2 id="pass-through-chat">Pass through chat</h2>

<blockquote>
<p>Example events request structure from chat server:</p>

<p>Pass trough chat is used when the bot is a gateway between other chat services.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pass_through"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"elements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"operator_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response from chat server:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pass_through"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"operator_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="postback-request">Postback request</h2>

<blockquote>
<p>Events request structure from chat server:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">CategoriesListPostback</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"operator_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
  <span class="o">{{</span>BASE_URL<span class="o">}}</span>/v2/system/chat <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'postman-token: d87ac2ec-9ff4-d28b-e08f-f1cf1b7abfe8'</span> <span class="se">\</span>
  -d <span class="s1">'{
  "events": [
    {
      "chat_id": "1231231231",
      "event_type": "postback",
      "data": {
        "payload": "{\"class\":\"CategoriesListPostback\"}"
      }
    }
  ]
}'</span>
</code></pre>
<blockquote>
<p>Structure that will be send to the chat server:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"template"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"template_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"elements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cleaning"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Get a quote from Fantastic Services for home &amp; office cleaning in London &amp; UK!"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"item_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://dev.fantasticxrm.com/data/uploads/uploaded_images/u7hwb8atld.png"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Book now"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">ServicesListPostback</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">categoryId</span><span class="se">\"</span><span class="s2">:70}"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Handyman &amp; Tradesman"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Handyman short description"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"item_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://dev.fantasticxrm.com/data/uploads/uploaded_images/yj3yeecnyk.png"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Book now"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">ServicesListPostback</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">categoryId</span><span class="se">\"</span><span class="s2">:72}"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">1020</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Postback successfull."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"db_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"latest_build"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<aside class="warning">Any template that has payload need to send Postback request back to the server</aside>

<p>When the <a href="#event-types">event_type</a> is <strong>postback</strong> in most cases a button needs to be clicked.
When that button is clicks the content of <strong>data.payload</strong> needs to be <strong>POST back</strong> to the server.</p>

<h2 id="regular-message">Regular message</h2>

<blockquote>
<p>Events request structure from chat server:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"message"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"operator_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
  <span class="o">{{</span>BASE_URL<span class="o">}}</span>/v2/system/chat <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'postman-token: 05345cc4-2927-ac96-11f9-4caa6cc562d5'</span> <span class="se">\</span>
  -d <span class="s1">'{
  "events": [
    {
      "chat_id": "ha123123sh",
      "event_type": "message",
      "data": {
        "text": "Hello"
      }
    }
  ]
}'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">1020</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Message received"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"debug_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"message text missing."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"debug_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">213124</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Structure that will be send to the chat server with separate request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"message"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"elements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When the <a href="#event-types">event_type</a> is <strong>message</strong> a regular text message is displayed to the client.</p>

<h2 id="end-chat">End chat</h2>

<p>Ending the chat session.</p>

<blockquote>
<p>Events request structure from chat server:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"end_chat"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>

<p>No response is needed</p>

<h2 id="buttons">Buttons</h2>

<blockquote>
<p>Events request structure from chat server:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">BottonExamplePostback</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"operator_available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Structure that will be send to the chat server:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">     
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"template"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"template_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"button"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"elements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bedroom(s) Flat"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">ChoiceViewQuestionPostback</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">choiceViewId</span><span class="se">\"</span><span class="s2">:33,</span><span class="se">\"</span><span class="s2">objectId</span><span class="se">\"</span><span class="s2">:85,</span><span class="se">\"</span><span class="s2">selectedValue</span><span class="se">\"</span><span class="s2">:1}"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">ChoiceViewQuestionPostback</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">choiceViewId</span><span class="se">\"</span><span class="s2">:33,</span><span class="se">\"</span><span class="s2">objectId</span><span class="se">\"</span><span class="s2">:85,</span><span class="se">\"</span><span class="s2">selectedValue</span><span class="se">\"</span><span class="s2">:2}"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Look at <a href="#templates">templates</a> on how buttons are displayed.</p>

          <h1 id="templates">Templates</h1>

<blockquote>
<p>Start chat template:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"template"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"template_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"elements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fantastic Services"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The One-Stop Shop for All Home Services"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://files.dxr.cloud/ShmtDmH6fi6HbIcxsAOUkj9L2Jc41cropp8WdVLWtOfgj0iNvZkfESwzgsOl"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Book now"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">CategoriesListPostback</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Help"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HelpPostback"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_url"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"View website"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.fantasticservices.com/"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">1020</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chat session started"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"db_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"latest_build"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Generic template:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"template_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"elements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fantastic Services"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The One-Stop Shop for All Home Services"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"item_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://files.dxr.cloud/ShmtDmH6fi6HbIcxsAOUkj9L2Jc41cropp8WdVLWtOfgj0iNvZkfESwzgsOl"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Book now"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">CategoriesListPostback</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Help"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HelpPostback"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_url"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"View website"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.fantasticservices.com/"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Button template:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">     
      </span><span class="s2">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"template"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"template_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"button"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"elements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bedroom(s) Flat"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">ChoiceViewQuestionPostback</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">choiceViewId</span><span class="se">\"</span><span class="s2">:33,</span><span class="se">\"</span><span class="s2">objectId</span><span class="se">\"</span><span class="s2">:85,</span><span class="se">\"</span><span class="s2">selectedValue</span><span class="se">\"</span><span class="s2">:1}"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
              </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">ChoiceViewQuestionPostback</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">choiceViewId</span><span class="se">\"</span><span class="s2">:33,</span><span class="se">\"</span><span class="s2">objectId</span><span class="se">\"</span><span class="s2">:85,</span><span class="se">\"</span><span class="s2">selectedValue</span><span class="se">\"</span><span class="s2">:2}"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Start chat visualization</strong>
     <a href="http://files.dxr.cloud/bOW1wle4gbUEmlBQuWyIV8J9CT2PtNXJFF7PycI74TepOKGbJi9n5Ils2WuS"><img src="http://files.dxr.cloud/bOW1wle4gbUEmlBQuWyIV8J9CT2PtNXJFF7PycI74TepOKGbJi9n5Ils2WuS" alt="N|GetStartedVisual" /></a>
 <strong>Generic visualization</strong> 
     <a href="http://files.dxr.cloud/lkiAQMSO4fi1CaQHNrrzucSvuGdD7ZDvXFEE09qFyiOoGkOHUkpJeeERZMWy"><img src="http://files.dxr.cloud/lkiAQMSO4fi1CaQHNrrzucSvuGdD7ZDvXFEE09qFyiOoGkOHUkpJeeERZMWy" alt="N|CategoriesListVisualization" /></a>
 <strong>Button visualization</strong>
     <a href="http://files.dxr.cloud/vtm0Rh3cifR7fPjAl6v238atPGj12AjOn95jD67op52gaPL7gejhWvHNKNxn"><img src="http://files.dxr.cloud/vtm0Rh3cifR7fPjAl6v238atPGj12AjOn95jD67op52gaPL7gejhWvHNKNxn" alt="N|ButtonVisualization" /></a></p>

          <h1 id="event-types">Event Types</h1>

<table><thead>
<tr>
<th>Type</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">start_chat</code></td>
<td>Initializes chat session.</td>
</tr>
<tr>
<td><code class="prettyprint">message</code></td>
<td>Regular text message is send to the client.</td>
</tr>
<tr>
<td><code class="prettyprint">postback</code></td>
<td><strong>POST</strong> a request back to the server with the contents of <code class="prettyprint">data.payload</code></td>
</tr>
</tbody></table>

          <h1 id="button-types">Button Types</h1>

<blockquote>
<p><code class="prettyprint">postback</code> button type structure</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postback"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Book now"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">class</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">CategoriesListPostback</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><code class="prettyprint">web_url</code> button type structure</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_url"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"View website"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.fantasticservices.com/"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Depending on the button type it can perform different function. </p>

<table><thead>
<tr>
<th>Type</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">postback</code></td>
<td>Button that should return the content of the <code>payload</code> element</td>
</tr>
<tr>
<td><code class="prettyprint">web_url</code></td>
<td>Button that links to a web page</td>
</tr>
</tbody></table>

<ul>
<li><code class="prettyprint">postback</code> 

<ul>
<li>payload - only available with postback button type. When the button is click the client must return the entire contend fot the payload.</li>
</ul></li>
<li><code class="prettyprint">web_url</code> 

<ul>
<li>used to open a web page</li>
</ul></li>
</ul>

          <h1 id="errors">Errors</h1>

<p>TODO</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>&ndash;</td>
<td>&mdash;</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
